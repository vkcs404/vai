<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastrar no Vai - Consentimento LGPD</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- NavBar -->
    <div>
        <nav>
            <a href="/">Home</a>
            <a href="/login">Login</a>
            <a href="/cadastro">Cadastrar</a>
        </nav>
    </div>

    <!-- Cadastro Container -->
    <div class="cadastro-container">
        <h1>Área de Cadastro</h1>
        
        <div class="cadastro-card">
            <h2>Cadastre-se</h2>
            <form id="cadastroForm" method="POST" action="/cliente_novo">
                <div>
                    <label for="cliente_nome">Nome:</label>
                    <input type="text" id="cliente_nome" name="cliente_nome" required>
                </div>
                <div>
                    <label for="cliente_email">Email:</label>
                    <input type="email" name="cliente_email" id="cliente_email" required>
                </div>
                <div>
                    <label for="cliente_senha">Senha:</label>
                    <input type="password" name="cliente_senha" id="cliente_senha" required>
                </div>

                <button type="button" id="openModalButton">Cadastrar</button>
            </form>

            <div style="text-align: center; margin-top: 1.5rem;">
                <a href="/escolher_relatorio" style="color: #00d4ff; text-decoration: none; font-size: 0.95rem;">
                    ← Voltar para escolher relatório
                </a>
            </div>
        </div>
    </div>

    <!-- Modal de Termos LGPD -->
    <div id="lgpd-modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Termos de Uso e LGPD (Lei nº 13.709/2018)</h3>
            </div>

            <div id="termsContent" class="modal-body">
                <p class="terms-date">Última atualização: 04/10/2024</p>

                <p>Bem-vindo(a) ao VAI, um serviço online que realiza varreduras técnicas (scans) em domínios e servidores autorizados, com o objetivo de identificar portas abertas, vulnerabilidades em cabeçalhos HTTP e outras falhas de configuração de segurança.</p>

                <p class="terms-important">Antes de utilizar o serviço, leia atentamente estes Termos de Uso. Ao marcar a caixa de aceite, você declara que compreende e concorda integralmente com as condições abaixo.</p>

                <h4>1. Finalidade do Serviço</h4>
                <p>O VAI destina-se exclusivamente à realização de análises de segurança autorizadas em sites, servidores e domínios de titularidade do usuário.</p>
                <p>O serviço tem caráter diagnóstico e educativo, fornecendo relatórios técnicos e sugestões de correção com base em boas práticas de segurança.</p>

                <h4>2. Autorização e Responsabilidade do Usuário</h4>
                <p>2.1. O usuário declara e garante que:</p>
                <ul>
                    <li>É o titular legítimo do domínio ou servidor a ser escaneado; ou</li>
                    <li>Possui autorização formal do titular para realizar o teste de segurança.</li>
                </ul>
                <p>2.2. O usuário é integralmente responsável pelas URLs, domínios e endereços IP inseridos no sistema.</p>

                <h4>3. Escopo Técnico e Limitações</h4>
                <p>3.1. O scanner realiza verificações não intrusivas, limitadas a:</p>
                <ul>
                    <li>Identificação de portas abertas;</li>
                    <li>Análise de cabeçalhos HTTP;</li>
                    <li>Geração de relatório técnico com recomendações.</li>
                </ul>

                <h4>4. Privacidade e Proteção de Dados (LGPD)</h4>
                <p>4.1. O tratamento de dados pessoais pelo VAI segue os princípios e regras da Lei Geral de Proteção de Dados (Lei nº 13.709/2018).</p>
                <p>4.2. As informações coletadas (Nome, Email, Senha) são utilizadas exclusivamente para:</p>
                <ul>
                    <li>Execução do contrato de prestação de serviço;</li>
                    <li>Cumprimento de obrigações legais e regulatórias;</li>
                    <li>Segurança e prevenção a fraudes.</li>
                </ul>

                <h4>5. Pagamentos e Entrega de Relatórios</h4>
                <p>5.1. O serviço é prestado mediante pagamento conforme plano selecionado.</p>
                <p>5.2. Após a confirmação do pagamento, o relatório será disponibilizado no painel do usuário.</p>

                <h4>6. Proibições Específicas</h4>
                <p>O usuário não pode:</p>
                <ul>
                    <li>Inserir domínios de terceiros sem autorização;</li>
                    <li>Utilizar o sistema para ataques ou exploração de vulnerabilidades;</li>
                    <li>Redistribuir ou revender os relatórios sem autorização.</li>
                </ul>

                <h4>7. Responsabilidade e Isenção</h4>
                <p>7.1. O VAI fornece os relatórios "no estado em que se encontram", sem garantia absoluta de exatidão.</p>
                <p>7.2. O sistema não se responsabiliza por prejuízos diretos ou indiretos decorrentes do uso dos relatórios.</p>

                <h4>8. Disposições Finais</h4>
                <p>8.1. Estes Termos podem ser atualizados periodicamente. A versão vigente estará sempre disponível no site.</p>
            </div>

            <div class="modal-footer">
                <div class="checkbox-container">
                    <input type="checkbox" id="lgpdConsent">
                    <label for="lgpdConsent">
                        Declaro que li e aceito integralmente os <strong>Termos de Uso</strong>, a <strong>Política de Privacidade</strong> e consinto com o <strong>Tratamento dos meus Dados Pessoais</strong>, conforme a LGPD.
                    </label>
                </div>

                <button type="button" id="confirmConsentButton" class="btn-confirm" disabled>
                    Aceitar e Cadastrar
                </button>
                <button type="button" id="cancelConsentButton" class="btn-cancel">
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('cadastroForm');
            const openModalButton = document.getElementById('openModalButton');
            const modalOverlay = document.getElementById('lgpd-modal-overlay');
            const lgpdConsent = document.getElementById('lgpdConsent');
            const confirmConsentButton = document.getElementById('confirmConsentButton');
            const cancelConsentButton = document.getElementById('cancelConsentButton');
            const termsContent = document.getElementById('termsContent');

            // Abrir Modal
            openModalButton.addEventListener('click', (event) => {
                event.preventDefault();
                modalOverlay.style.display = 'flex';
                termsContent.scrollTop = 0; 
            });

            // Controlar botão pelo checkbox
            lgpdConsent.addEventListener('change', () => {
                confirmConsentButton.disabled = !lgpdConsent.checked;
            });

            // Confirmar e submeter
            confirmConsentButton.addEventListener('click', () => {
                if (lgpdConsent.checked) {
                    modalOverlay.style.display = 'none';
                    form.submit();
                }
            });

            // Cancelar
            cancelConsentButton.addEventListener('click', () => {
                modalOverlay.style.display = 'none';
                lgpdConsent.checked = false;
                lgpdConsent.dispatchEvent(new Event('change'));
            });

            // Fechar clicando fora
            modalOverlay.addEventListener('click', (event) => {
                if (event.target === modalOverlay) {
                    modalOverlay.style.display = 'none';
                    lgpdConsent.checked = false;
                    lgpdConsent.dispatchEvent(new Event('change'));
                }
            });
        });
    </script>
</body>
</html>
